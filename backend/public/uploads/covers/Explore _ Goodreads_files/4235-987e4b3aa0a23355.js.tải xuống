"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4235],{37587:(e,n,r)=>{r.d(n,{$:()=>t});var t=function(e){return e.NativeAd="dfp_native_update",e.PremiumAd="premium_campaign_native_ad",e}({})},6548:(e,n,r)=>{r.d(n,{jw:()=>s,Km:()=>t,$l:()=>o.$,zy:()=>i});let t={Largest:1312,XLarge:1280,Large:1028,Medium:672,Small:456,Smallest:380},a={Leaderboard:[728,90],LargeLeaderboard:[970,90],HalfPage:[300,600],MediumRectangle:[300,250],MobileLeaderboard:[320,50],NativeAd:[625,210],PIPLeaderboard:[970,250],TallMobileLeaderboard:[320,100]},i={TopBanner:{slotType:"topBanner",slotMappings:{Large:[a.LargeLeaderboard,a.PIPLeaderboard,a.Leaderboard],Medium:[a.LargeLeaderboard,a.PIPLeaderboard,a.Leaderboard],Smallest:[a.TallMobileLeaderboard,a.MobileLeaderboard]}},BottomBanner:{slotType:"bottomBanner",slotMappings:{Large:[a.LargeLeaderboard],Smallest:[a.MobileLeaderboard,a.TallMobileLeaderboard]}},InlineAd:{slotType:"inlineAd",slotMappings:{Largest:[a.LargeLeaderboard,a.Leaderboard],Medium:[a.MediumRectangle],Smallest:[a.MediumRectangle,a.MobileLeaderboard]}},ListIndex:{TopBanner:{slotType:"topBanner",slotMappings:{XLarge:[a.PIPLeaderboard],Large:[a.Leaderboard],Smallest:[a.MobileLeaderboard]}},Siderail:{slotType:"siderail",slotMappings:{Medium:[a.HalfPage]}},InlineAd:{slotType:"inlineAd",slotMappings:{Large:[a.Leaderboard],Medium:[a.MobileLeaderboard],Smallest:[a.MediumRectangle]}},BottomBanner:{slotType:"bottomBanner",slotMappings:{XLarge:[a.LargeLeaderboard],Large:[a.Leaderboard],Medium:[a.MobileLeaderboard],Smallest:[a.MediumRectangle]}}},NativeAd:{slotType:"nativeAd",slotMappings:{Medium:[a.NativeAd,a.MediumRectangle],Smallest:[a.MediumRectangle]}}},s=[a.MediumRectangle,a.Leaderboard,a.LargeLeaderboard,a.MobileLeaderboard];var o=r(37587)},41174:(e,n,r)=>{r.d(n,{i:()=>w,D:()=>S});var t=r(74848),a=r(96540),i=r(39421),s=r(92071),o=r(84577);function l(){let e=(0,o._)(["\n  query GetAdsTargeting($id: ID, $legacyId: Int, $legacyResourceType: String) {\n    getAdsTargeting(\n      getAdsTargetingInput: {\n        contextual: {\n          id: $id\n          legacyId: $legacyId\n          legacyResourceType: $legacyResourceType\n        }\n      }\n    ) {\n      behavioral {\n        adGroupNames\n        age\n        authors\n        blockedAuthors\n        gender\n        genres\n        userTargetingSettings {\n          allowBehavioralTargeting\n        }\n      }\n      contextual {\n        resource\n        tags\n        adult\n      }\n    }\n  }\n"]);return l=function(){return e},e}let d=(0,r(95633).J1)(l());var c=r(46537),u=r(7940),h=r(84934),g=r(38221),m=r.n(g),v=r(6548),x=r(54279),p=r(1694),f=r(83413),j=r(1447),b=r(80139);let y=Object.values(v.Km),w=a.createContext({isInitialized:!1,nativeAdStore:new Map}),k=()=>{let{googletag:e,apstag:n}=window;if(void 0===n||void 0===e){x.A.error("[Ad error]: Ad scripts not loaded in window.");return}n.fetchBids({},()=>{e.cmd.push(()=>{n.setDisplayBids(),e.pubads().refresh()})})},S=e=>{let{children:n}=e,r=(0,h.useRouter)(),[o,l]=(0,a.useState)(!1),[g,x]=(0,a.useState)(null),[S,N]=(0,a.useState)(new Map),T=(0,a.useContext)(i.c),A={};{let{resourceType:e,resourceId:n}=(0,u._U)(r);e&&(A={legacyId:n,legacyResourceType:e})}let C=e=>{if(!e.isEmpty){let{slot:n}=e,r=n.getSlotElementId(),t=(0,j.OR)(r,v.$l.NativeAd);if(t){let n=(0,b.Fb)(e),a={nativeId:t[0],nativeUrl:t[1],additionalRequestData:n};N({...S,[r]:a})}}};(0,a.useEffect)(()=>{let{googletag:e}=window;null==e||e.cmd.push(()=>{e.pubads().addEventListener("slotRenderEnded",e=>C(e))})},[]);let G=(0,c.IT)(d,{variables:A});(0,a.useEffect)(()=>{(null==G?void 0:G.loading)||_(G)},[null==G?void 0:G.loading]);let _=e=>{var n;let t=(0,u.Ny)((null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.getAdsTargeting)||{},T,"false"!==s.A.get("allow_behavioral_targeting"));p.A.reportCount("AdLibrariesInitialized",[],t?1:0),p.A.reportCount("AdLibrariesInitialized",[(0,f.N6)(r.pathname)],t?1:0),l(t)};return(0,a.useEffect)(()=>{let e=m()(()=>{y.some(e=>(e-window.innerWidth)*(e-g||window.innerWidth)<=0)&&(k(),N(new Map),x(window.innerWidth))},250);return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),(0,t.jsx)(w.Provider,{value:{isInitialized:o,nativeAdStore:S},children:n})}},73699:(e,n,r)=>{r.d(n,{Y9:()=>ed,ju:()=>eo,q7:()=>es,w6:()=>ei});var t=r(74848),a=r(96540),i=r(86100),s=r(81163),o=r(66909),l=r(42189),d=r(20024),c=r(2420),u=r(68431),h=r(39421),g=r(73621);let m=()=>{var e;let n="Spotlight",r="SpotlightPane",{loading:a,error:i,data:c}=(0,g.A)();if(i||a||!(null==c?void 0:c.getUser))return null;let u=c.getUser;if(null===(e=u.favoriteGenres)||void 0===e?void 0:e.totalCount){let e=u.favoriteGenres.edges.slice(0,8);return(0,t.jsxs)("div",{className:(0,o.o4)(n),children:[(0,t.jsx)("span",{className:(0,o.o4)(n,"listTitle"),children:"Favorite Genres"}),(0,t.jsxs)("ul",{children:[e.map(e=>{var n,r,a;return(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:null===(n=e.node)||void 0===n?void 0:n.webUrl,tabIndex:0,children:null===(r=e.node)||void 0===r?void 0:r.name})},null===(a=e.node)||void 0===a?void 0:a.name)}),(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{href:"/genres",refTag:l.Gn.Genres,children:"All Genres"})})]})]})}return(0,t.jsxs)("div",{className:(0,o.o4)(r),children:[(0,t.jsx)("div",{className:(0,o.o4)(r,"title"),children:"What do you like to read?"}),(0,t.jsxs)("div",{className:(0,o.o4)(r,"description"),children:["Choose your favorite genres to get",(0,t.jsx)("br",{}),"personalized book recommendations."]}),(0,t.jsx)(s.Button,{href:"/user/edit_fav_genres",size:s.ButtonSize.Medium,children:"Choose Favorite Genres"}),(0,t.jsx)("a",{className:(0,o.o4)(r,"browseGenres"),href:"/genres",children:"Browse Genres"})]})};var v=r(46537),x=r(84577),p=r(95633);function f(){let e=(0,x._)(["\n  query {\n    getBasicGenres {\n      genres {\n        name\n        webUrl\n      }\n    }\n  }\n"]);return f=function(){return e},e}let j=(0,p.J1)(f());var b=r(50720);let y="Spotlight",w=()=>{let{loading:e,error:n,data:r}=(0,v.IT)(j,{ssr:!1});if(e)return(0,t.jsx)("div",{className:(0,o.o4)(y,"loadingState"),children:(0,t.jsx)(b.B0,{loadingTextSize:b.H7.SMALL})});let a=null==r?void 0:r.getBasicGenres;return!n&&(null==a?void 0:a.genres)?(0,t.jsxs)("div",{className:(0,o.o4)(y),children:[(0,t.jsx)("span",{className:(0,o.o4)(y,"listTitle"),children:"Genres"}),(0,t.jsxs)("ul",{className:(0,o.o4)(y,"basicGenresList"),children:[r.getBasicGenres.genres.map(e=>{let{name:n,webUrl:r}=e;return(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{href:r,refTag:l.Gn.Genres,children:n})},n)}),(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{href:"https://www.goodreads.com/genres",refTag:l.Gn.Genres,children:"More Genres"})})]})]}):null},k=()=>{var e,n;let r="HeaderPrimaryNav",s="HeaderNavDropdown",u=null!==(n=null===(e=(0,a.useContext)(h.c))||void 0===e?void 0:e.signedIn)&&void 0!==n&&n,{hasSiteHeaderBanner:g}=(0,a.useContext)(c.Q);return(0,t.jsx)("nav",{className:r,"aria-label":"Primary Navigation",role:"navigation",children:(0,t.jsxs)("ul",{className:(0,o.o4)(r,"list"),children:[(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{href:"/",refTag:l.Gn.Home,children:"Home"})}),(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{href:"/review/list",refTag:l.Gn.MyBooks,children:"My Books"})}),(0,t.jsxs)("li",{className:(0,o.o4)(r,"dropDown"),children:[(0,t.jsx)(d.ZG,{href:"#","aria-haspopup":"true",refTag:l.Gn.NavBrowse,children:"Browse ▾"}),(0,t.jsx)(d.$D,{addRefTag:l.Gn.NavBrowse,children:(0,t.jsxs)("div",{className:(0,i.A)([(0,o.o4)(s),(0,o.o4)(s,"","browse"),{[(0,o.o4)(s,"","siteHeaderBanner")]:g}]),children:[(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{refTag:l.Gn.Recommendations,href:"/recommendations",children:"Recommendations"})}),(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{refTag:l.Gn.GCA,href:"/choiceawards",children:"Choice Awards"})}),(0,t.jsx)("li",{className:(0,o.o4)(r,"genres"),children:(0,t.jsx)(d.ZG,{refTag:l.Gn.Genres,href:"/genres",children:"Genres"})}),(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{refTag:l.Gn.Giveaways,href:"/giveaway",children:"Giveaways"})}),(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{refTag:l.Gn.NewReleases,href:"/new_releases",children:"New Releases"})}),(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{refTag:l.Gn.Lists,href:"/list",children:"Lists"})}),(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{refTag:l.Gn.Explore,href:"/book",children:"Explore"})}),(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{refTag:l.Gn.News,href:"/news",children:"News & Interviews"})})]}),u?(0,t.jsx)(m,{}):(0,t.jsx)(w,{})]})})]}),(0,t.jsxs)("li",{className:(0,o.o4)(r,"dropDown"),children:[(0,t.jsx)(d.ZG,{href:"#","aria-haspopup":"true",refTag:l.Gn.Community,children:"Community ▾"}),(0,t.jsx)(d.$D,{addRefTag:l.Gn.Community,children:(0,t.jsx)("div",{className:(0,i.A)([(0,o.o4)(s)]),children:(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{refTag:l.Gn.Groups,href:"/group",children:"Groups"})}),u&&(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{refTag:l.Gn.Discussion,href:"/topic",children:"Discussions"})}),(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{refTag:l.Gn.Quotes,href:"/quotes",children:"Quotes"})}),(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{refTag:l.Gn.AskTheAuthor,href:"/ask_the_author",children:"Ask the Author"})}),(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{refTag:l.Gn.People,href:"/user/best_reviewers",children:"People"})})]})})})]})]})})};var S=r(70090);let N=e=>{let n="HeaderNavDropdown",{overlay:r,children:a}=e,s=[n,{[(0,o.o4)(n,"","overlay")]:r}];return(0,t.jsx)("ul",{className:(0,i.A)(s),children:a})};var T=r(55127),A=r.n(T);let C=e=>{let{unreadCount:n=0}=e,r="NotificationsBadge";return n?(0,t.jsx)("div",{className:r,children:(0,t.jsx)("span",{className:(0,o.o4)(r,"text"),"aria-hidden":"true",children:n>99?"".concat(99,"+"):"".concat(n)})}):null},G=e=>{let{href:n,highlight:r=!1,onClick:s,overlay:l,...c}=e,u=a.useRef(null),[h,g]=a.useState(!1),m="HeaderSecondaryNavButton",v=(0,i.A)([m,{[(0,o.o4)(m,void 0,"highlight")]:r}]),x=()=>(0,t.jsx)("span",{className:(0,o.o4)(m,"icon"),children:c.children}),p=c["aria-label"];if(c.unreadCount&&c.unreadCount>0){let e=c.unreadCount>99?"More than ".concat(99," unread ").concat(c["aria-label"].toLowerCase()):"".concat(c.unreadCount," unread ").concat(A()(c["aria-label"].toLowerCase(),c.unreadCount));p+=" - ".concat(e)}return n?c.refTag?(0,t.jsx)(d.ZG,{href:n,"aria-label":p,className:v,refTag:c.refTag,children:(0,t.jsx)(x,{})}):(0,t.jsx)("a",{href:n,"aria-label":p,className:v,children:(0,t.jsx)(x,{})}):(0,t.jsxs)("div",{children:[(0,t.jsx)("button",{type:"button",onClick:()=>{s&&s(),l&&g(!h)},"aria-label":p,"aria-expanded":h,className:v,ref:u,children:(0,t.jsx)(x,{})}),l&&h&&a.cloneElement(l,{open:h,setOpen:g,anchorRef:u})]})};function _(){let e=(0,x._)(["\n  query getViewer {\n    getUser {\n      viewerNotifications(pagination: { after: null, limit: 10 }) {\n        edges {\n          node {\n            actors {\n              edges {\n                node {\n                  name\n                  imageUrl\n                  webUrl\n                }\n              }\n            }\n            body\n            createdAt\n            viewed\n            directlyAddressed\n            moreActors\n            resourceText\n            resourceUrl\n            historyMessage\n          }\n        }\n      }\n    }\n  }\n"]);return _=function(){return e},e}let L=(0,p.J1)(_()),I="NotificationsTray",B=(e,n)=>{let r=e.map(e=>{var n,r,a;return(0,t.jsx)("a",{className:(0,o.o4)(I,"actorLink"),href:null==e?void 0:null===(n=e.node)||void 0===n?void 0:n.webUrl,children:null==e?void 0:null===(r=e.node)||void 0===r?void 0:r.name},null==e?void 0:null===(a=e.node)||void 0===a?void 0:a.webUrl)});return n?function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:", ",r=[];return e.slice(0,-1).forEach(e=>{r.push(e),r.push(n)}),r.push(e[e.length-1]),(0,t.jsx)("span",{children:r})}(r):function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"and",r=[],a=e.length;switch(a){case 0:return"";case 1:r.push(e[0]);break;case 2:r.push(e[0]),r.push(" ".concat(n," ")),r.push(e[1]);break;default:e.slice(0,-1).forEach(e=>{r.push(e),r.push(", ")}),r.push("".concat(n," ")),r.push(e[a-1])}return(0,t.jsx)("span",{children:r})}(r)},U=e=>{var n,r;let{closeTray:i,notificationsHaveLoaded:l,trayHasBeenClosed:d,setNotificationsHaveLoaded:c}=e,u=(0,a.useRef)(null),{loading:h,error:g,data:m}=(0,v.IT)(L),x=e=>{var n;null!=u&&null!==(n=u.current)&&void 0!==n&&n.contains(e.target)||i()};return(0,a.useEffect)(()=>(document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}),[]),(0,a.useEffect)(()=>{m&&!l&&c(!0)},[m,c]),(0,t.jsxs)("div",{className:I,ref:u,children:[h&&(0,t.jsx)("div",{className:(0,o.o4)(I,"loading"),children:(0,t.jsx)(s.LoadingIcon,{})}),g&&(0,t.jsx)("div",{className:(0,o.o4)(I,"error"),children:(0,t.jsx)("span",{children:"Error loading notifications."})}),!h&&m&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("a",{className:(0,o.o4)(I,"allNotificationsLinkBox"),href:"https://goodreads.com/notifications","aria-label":"View all notifications",children:(0,t.jsxs)("div",{className:(0,o.o4)(I,"header"),children:[(0,t.jsx)("span",{className:(0,o.o4)(I,"title"),children:"Notifications"}),(0,t.jsx)("span",{className:(0,o.o4)(I,"allNotificationsLink"),children:"View all notifications"})]})}),(0,t.jsx)("div",{className:(0,o.o4)(I,"notifications"),children:null==m?void 0:null===(r=m.getUser)||void 0===r?void 0:null===(n=r.viewerNotifications)||void 0===n?void 0:n.edges.map(e=>{var n,r,a,i,l,c;let{node:{id:u,actors:h,createdAt:g,viewed:m,directlyAddressed:v,moreActors:x,body:p,resourceText:f,resourceUrl:j,historyMessage:b}}=e;return(0,t.jsxs)("div",{className:(0,o.o4)(I,"notification"),children:[(0,t.jsx)("div",{className:(0,o.o4)(I,"notificationAvatar"),children:(0,t.jsx)(s.Avatar,{imageProps:{src:null==h?void 0:null===(r=h.edges[0])||void 0===r?void 0:null===(n=r.node)||void 0===n?void 0:n.imageUrl,alt:null==h?void 0:null===(i=h.edges[0])||void 0===i?void 0:null===(a=i.node)||void 0===a?void 0:a.name},href:null==h?void 0:null===(c=h.edges[0])||void 0===c?void 0:null===(l=c.node)||void 0===l?void 0:l.webUrl,size:s.Avatar.Size.Small})}),(0,t.jsxs)("div",{className:(0,o.o4)(I,"notificationMessage"),children:[(0,t.jsxs)("div",{className:(0,o.o4)(I,"notificationMessageBox"),children:["string"==typeof j&&j.includes("choiceawards")?"":B(null==h?void 0:h.edges,x),v?", ":" ","".concat(p," "),j&&f&&(0,t.jsx)("a",{className:(0,o.o4)(I,"notificationResourceLink"),href:j,children:f})]}),(0,t.jsxs)("div",{className:(0,o.o4)(I,"notificationTimeBox"),children:[!m&&!d&&(0,t.jsx)("span",{className:(0,o.o4)(I,"notificationAlertText"),children:"New"}),(0,t.jsx)(s.RelativeTime,{time:g}),b&&(0,t.jsx)("span",{className:(0,o.o4)(I,"notificationHistoryText"),children:b})]})]})]},u)})})]})]})},M="HeaderSecondaryNav",P={notificationsUnreadCount:0,messagesUnreadCount:0,friendRequestsUnreadCount:0},E=(e,n)=>e.reduce((e,r)=>(e[r[n]]=r,e),{}),R=e=>{var n,r,t,a,i,s,o,l;let d=e.navigationQuickLinks&&E(e.navigationQuickLinks,"pageType"),c=null!==(a=null==d?void 0:null===(n=d.PROFILE)||void 0===n?void 0:n.webUrl)&&void 0!==a?a:"";return e.isAuthor&&e.contributor&&(null==d?void 0:d.PROFILE)&&(c=null!==(s=null===(i=e.contributor)||void 0===i?void 0:i.webUrl)&&void 0!==s?s:""),{commentsLink:null!==(o=null==d?void 0:null===(r=d.COMMENTS)||void 0===r?void 0:r.webUrl)&&void 0!==o?o:"",groupsLink:null!==(l=null==d?void 0:null===(t=d.GROUPS)||void 0===t?void 0:t.webUrl)&&void 0!==l?l:"",profileLink:c}},F=()=>{var e,n;let r=null!==(n=null===(e=(0,a.useContext)(h.c))||void 0===e?void 0:e.signedIn)&&void 0!==n&&n,c=(0,s.useFor)({lessThan:s.Breakpoints.Medium}),[u,m]=(0,a.useState)(!1),[v,x]=(0,a.useState)(!1),[p,f]=(0,a.useState)(!1),{loading:j,error:b,data:y}=(0,g.A)();if(!r)return(0,t.jsx)("nav",{className:M,"aria-label":"Sign in or Join",children:(0,t.jsxs)("ul",{className:(0,i.A)([(0,o.o4)(M,"list"),(0,o.o4)(M,"list","signedOut")]),children:[(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"/user/sign_in",children:"Sign in"})}),(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"/user/sign_up",children:c?"Sign up":"Join"})})]})});if(b||j||!(null==y?void 0:y.getUser))return null;let w=j||b?P:y.getUser,k=w.viewerNotificationsUnreadCount||0,T=w.viewerMessagesUnreadCount||0,A=w.viewerFriendRequestsUnreadCount||0,_=()=>{u&&x(!0),m(!u)},L=()=>{m(!1),x(!0)},I=y.getUser,B=R(I),E=p&&v?0:k,F=T+A+E,D=A>0,H=D?"/friend/requests":"/friend",q=D?"Friend requests":"Friends",Z={notificationsTray:()=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(G,{onClick:_,"aria-label":"Notifications",unreadCount:E,"aria-haspopup":"true","aria-expanded":u,highlight:u,children:[(0,t.jsx)(s.NotificationsIcon,{}),(0,t.jsx)(C,{unreadCount:E})]}),u&&(0,t.jsx)(U,{closeTray:L,notificationsHaveLoaded:p,trayHasBeenClosed:v,setNotificationsHaveLoaded:f})]}),notifications:e=>(0,t.jsxs)(G,{href:"/notifications","aria-label":"Notifications",unreadCount:E,refTag:e,children:[(0,t.jsx)(s.NotificationsIcon,{}),(0,t.jsx)(C,{unreadCount:E})]}),groups:e=>(0,t.jsx)(G,{href:"/topic","aria-label":"Group discussions",refTag:e,children:(0,t.jsx)(s.DiscussionsIcon,{})}),messages:e=>(0,t.jsxs)(G,{href:"/message/inbox","aria-label":"Messages",unreadCount:T,refTag:e,children:[(0,t.jsx)(s.MessagesIcon,{}),(0,t.jsx)(C,{unreadCount:T})]}),friends:e=>(0,t.jsxs)(G,{href:H,"aria-label":q,unreadCount:A,refTag:e,children:[(0,t.jsx)(s.FriendsIcon,{}),(0,t.jsx)(C,{unreadCount:A})]})},z=(0,t.jsx)(s.DropdownMenu,{expandFrom:s.ExpandDirection.bottomLeft,children:(0,t.jsx)(d.$D,{addRefTag:l.Gn.Profile,children:(0,t.jsxs)(N,{overlay:!0,children:[(0,t.jsxs)("li",{children:[(0,t.jsx)(d.ZG,{href:B.profileLink,className:(0,o.o4)("HeaderNavDropdown","avatar"),children:(0,t.jsx)(s.Avatar,{size:s.Avatar.Size.Large,bordered:!0,imageProps:{src:I.imageUrlSquare,alt:"Profile Image for ".concat(I.name,".")}})}),(0,t.jsxs)("div",{className:(0,o.o4)("HeaderNavDropdown","profileLink"),children:[(0,t.jsx)(d.ZG,{href:B.profileLink,children:I.name}),(0,t.jsx)("div",{className:(0,o.o4)("HeaderNavDropdown","toggleEditView"),children:(0,t.jsx)(S.yK,{})})]})]}),(0,t.jsx)("li",{className:(0,i.A)([(0,o.o4)(M,"topDivider"),(0,o.o4)(M,"buttons")]),children:c&&(0,t.jsxs)("ul",{className:(0,o.o4)(M,"mobileNotificationLinks"),children:[(0,t.jsx)("li",{children:Z.notifications(l.Gn.Notification)}),(0,t.jsx)("li",{children:Z.groups(l.Gn.MyGroups)}),(0,t.jsx)("li",{children:Z.messages(l.Gn.MyMessages)}),(0,t.jsx)("li",{children:Z.friends(l.Gn.MyFriends)})]})}),(0,t.jsx)("li",{className:(0,o.o4)(M,"topDivider"),children:(0,t.jsx)(d.ZG,{href:B.profileLink,children:"Profile"})}),I.isAuthor&&(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{refTag:l.Gn.AuthorDashbord,href:"/author/dashboard",children:"Author Dashboard"})}),I.isAuthor&&(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{refTag:l.Gn.ListAGiveaway,href:"/giveaway/show_create_options",children:"List a Giveaway"})}),(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{refTag:l.Gn.Friends,href:"/friend",children:"Friends"})}),(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{refTag:l.Gn.Groups,href:B.groupsLink,children:"My Groups"})}),(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{href:"/topic",refTag:l.Gn.Discussion,children:"Discussions"})}),(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{href:B.commentsLink,refTag:l.Gn.Comment,children:"Comments"})}),(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{href:null==I?void 0:I.readingChallengeUrl,refTag:l.Gn.ReadingChallenge,children:"Reading Challenge"})}),(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{href:"/notes",refTag:l.Gn.KindleNotesHighlight,children:"Kindle Notes & Highlights"})}),(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{href:"/quotes/list",refTag:l.Gn.Quotes,children:"Quotes"})}),(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{href:"/user/edit_fav_genres?return_url=%2Ffriend%2Frequests",refTag:l.Gn.FavoriteGenre,children:"Change favorite genres"})}),(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{href:"/recommendations/to_me",refTag:l.Gn.FriendsRecommendation,children:"Friends' recommendations"})}),(0,t.jsx)("li",{className:(0,o.o4)(M,"topDivider"),children:(0,t.jsx)(d.ZG,{href:"/user/edit",refTag:l.Gn.AccountSettings,children:"Account Settings"})}),(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{href:"//help.goodreads.com/services/auth/oauth/LWG",refTag:l.Gn.Help,children:"Help"})}),(0,t.jsx)("li",{children:(0,t.jsx)(d.ZG,{href:"/user/sign_out",refTag:l.Gn.SignOut,children:"Sign out"})})]})})});return(0,t.jsx)("nav",{className:M,"aria-label":"Notifications and Settings",children:(0,t.jsxs)("ul",{className:(0,o.o4)(M,"list"),children:[!c&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("li",{className:(0,o.o4)(M,"desktopNotification"),children:Z.notificationsTray()}),(0,t.jsx)("li",{className:(0,o.o4)(M,"desktopNotification"),children:Z.groups(l.Gn.MyGroups)}),(0,t.jsx)("li",{className:(0,o.o4)(M,"desktopNotification"),children:Z.messages(l.Gn.MyMessages)}),(0,t.jsx)("li",{className:(0,o.o4)(M,"desktopNotification"),children:Z.friends(l.Gn.MyFriends)})]}),B&&(0,t.jsx)("li",{children:(0,t.jsxs)(G,{"aria-label":"User settings and information","aria-haspopup":"true",overlay:z,children:[(0,t.jsx)(s.Avatar,{size:s.Avatar.Size.XSmall,imageProps:{src:I.imageUrlSquare,alt:"Profile Image for ".concat(I.name,".")}}),c&&(0,t.jsx)(C,{unreadCount:F})]})})]})})};var D=r(77969);function H(){let e=(0,x._)(["\n  query getSearchSuggestions($searchQuery: String!) {\n    getSearchSuggestions(query: $searchQuery) {\n      edges {\n        ... on SearchBookEdge {\n          node {\n            id\n            title\n            primaryContributorEdge {\n              node {\n                name\n                isGrAuthor\n              }\n            }\n            webUrl\n            imageUrl\n          }\n        }\n      }\n    }\n  }\n"]);return H=function(){return e},e}let q=(0,p.J1)(H());var Z=r(38221),z=r.n(Z),O=r(65188),$=r(15784);let W=e=>{let{query:n,book:r,selected:a,setSelection:i,ranking:o}=e,l="HeaderSearchBookItem",{createRefTag:d}=(0,$.I)(),c="".concat(n.length),u=d("".concat(o+1),c),{title:h}=r,g=r.primaryContributorEdge.node.name,m=r.primaryContributorEdge.node.isGrAuthor;return(0,t.jsx)("li",{className:l,onMouseEnter:()=>i("books",o),onMouseLeave:()=>i("",-1),children:(0,t.jsxs)("a",{href:"".concat(r.webUrl,"?ref=").concat(u),"aria-label":"Search result ".concat(h," by ").concat(g),className:(0,s._bem)(l,"link",a?"selected":null),onMouseDown:e=>e.preventDefault(),children:[(0,t.jsx)("img",{src:r.imageUrl,alt:"",className:(0,s._bem)(l,"image")}),(0,t.jsx)("span",{className:(0,s._bem)(l,"title"),children:h}),(0,t.jsxs)("span",{className:(0,s._bem)(l,"author"),children:["by ".concat(g," "),m&&(0,t.jsx)(s.BadgeIcon,{})]})]})})},J=e=>{let{query:n,author:r,selected:a,setSelection:i,ranking:s}=e,l="HeaderSearchAuthorItem",{createRefTag:d}=(0,$.I)(),c="".concat(n.length),u=d("".concat(s+1),c);return(0,t.jsx)("li",{className:l,onMouseEnter:()=>i("authors",s),onMouseLeave:()=>i("",-1),children:(0,t.jsx)("a",{href:"".concat(r.profileUrl,"?ref=").concat(u),"aria-label":"Search result",className:(0,o.o4)(l,"link",a?"selected":null),children:r.name})})};var V=function(e){return e.Book="Book",e.Author="Author",e}({});let K=e=>{let{query:n,items:r,listType:a,selectedIndex:i,setSelection:s}=e,l=[];switch(a){case"Author":l=r.map((e,r)=>(0,t.jsx)(J,{query:n,author:e,ranking:r,selected:i===r,setSelection:s},e.id));break;case"Book":l=r.map((e,r)=>(0,t.jsx)(W,{query:n,book:e,ranking:r,selected:i===r,setSelection:s},e.id))}return(0,t.jsx)("div",{children:(0,t.jsx)("ul",{"aria-label":"List of ".concat(a,"s"),className:(0,o.o4)("HeaderSearchList","list"),children:l})})},Q=e=>{let{query:n}=e,r="HeaderSearchSeeMore",{createRefTag:a}=(0,$.I)(),i=a("".concat(n.length));return(0,t.jsx)("li",{className:r,children:(0,t.jsx)("a",{className:(0,o.o4)(r,"link"),href:"https://goodreads.com/search?q=".concat(n,"&ref=").concat(i),onMouseDown:e=>e.preventDefault(),children:'Show all results for "'.concat(n,'"')})})},X=e=>{let{query:n,results:r,selection:a,setSelection:i}=e;return(0,t.jsxs)("ul",{className:"HeaderSearchListTray",children:[(0,t.jsx)("li",{children:r.books?(0,t.jsx)(K,{query:n,items:r.books,listType:V.Book,selectedIndex:"books"===a.contentType?a.index:-1,setSelection:i}):(0,t.jsx)(t.Fragment,{})}),(0,t.jsx)("li",{children:r.authors?(0,t.jsx)(K,{query:n,items:r.authors,listType:V.Author,selectedIndex:"authors"===a.contentType?a.index:-1,setSelection:i}):(0,t.jsx)(t.Fragment,{})}),(0,t.jsx)(O.$,{addRefTag:l.Gn.Link,children:(0,t.jsx)(Q,{query:n})})]})},Y=()=>{let e="HeaderSearch",[n,r]=(0,a.useState)(""),[i,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(""),[u,h]=(0,a.useState)({contentType:"",index:-1}),[g,m]=(0,a.useState)({books:[],authors:[]}),[v,{loading:x}]=(0,D._)(q,{onCompleted:e=>{let n={books:[],authors:[]};e.getSearchSuggestions&&e.getSearchSuggestions.edges.forEach(e=>{(null==e?void 0:e.node)&&n.books.push(e.node)}),m(n)}}),p=(0,a.useCallback)(z()(e=>{v({variables:{searchQuery:e}})},300),[]),{createRefTag:f}=(0,$.I)(),j="".concat(n.length||""),b=f(l.Gn.NoSearchSuggestions,l.Gn.Link,j),y=(e,n)=>{let r="";switch(e){case"books":r="Search result ".concat(g[e][n].title," by ").concat(g[e][n].primaryContributorEdge.node.name);break;case"authors":r=g[e][n].name}c(r)},w=(e,n)=>{if(g[e]&&n>=0&&n<g[e].length){h({contentType:e,index:n}),y(e,n);return}h({contentType:"",index:-1}),y("",-1)},k=()=>{o(!1),w("",-1)},S=()=>{if(!g)return;let e=Object.keys(g);if(!u.contentType){w(e[0],0);return}let n={contentType:u.contentType,index:u.index};if(u.index+1===g[u.contentType].length){let r=e.indexOf(u.contentType);r+1===e.length?(n.contentType="",n.index=-1):(n.contentType=e[r+1],n.index=0)}else n.index=u.index+1;w(n.contentType,n.index)},N=()=>{if(!g)return;let e=Object.keys(g);if(!u.contentType){let n=e.indexOf(e[e.length-1]);for(;0===g[e[n]].length&&n>=0;)n-=1;w(e[n],g[e[n]].length-1);return}let n={contentType:u.contentType,index:u.index};if(0===u.index){let r=e.indexOf(u.contentType);0===r?(n.contentType="",n.index=-1):(n.contentType=e[r-1],n.index=g[e[r-1]].length-1)}else n.index=u.index-1;w(n.contentType,n.index)};return(0,t.jsxs)("section",{role:"search",className:e,children:[(0,t.jsx)("div",{role:"region","aria-live":"assertive",className:"u-sr-only",children:d}),(0,t.jsxs)("form",{action:"https://www.goodreads.com/search",method:"get",children:[(0,t.jsx)("input",{type:"text",role:"combobox",name:"q",className:(0,s._bem)(e,"input"),"aria-label":"Search by book title or ISBN",spellCheck:"false","aria-autocomplete":"list","aria-expanded":i,"aria-controls":"search-listbox",placeholder:"Search books",onChange:e=>{r(e.target.value),w("",-1),e.target.value.length>=3&&p(e.target.value)},onFocus:()=>{o(!0)},onBlur:k,onKeyDown:e=>{switch(e.keyCode){case s.KeyCodes.Escape:k();break;case s.KeyCodes.Enter:if(/\S/.test(n)){if(""!==u.contentType)switch(e.preventDefault(),u.contentType){case"books":window.location.href="".concat(g[u.contentType][u.index].webUrl,"?ref=").concat(b);break;case"authors":window.location.href=g.authors[u.index].profileUrl}}else e.preventDefault();break;case s.KeyCodes.UpArrow:i&&g&&(e.preventDefault(),N());break;case s.KeyCodes.DownArrow:i&&g&&(e.preventDefault(),S())}},value:n}),(0,t.jsx)("input",{type:"hidden",name:"ref",value:b}),(0,t.jsx)("button",{type:"submit",value:"","aria-label":"Search",className:(0,s._bem)(e,"button"),children:x?(0,t.jsx)(s.LoadingIcon,{}):(0,t.jsx)(s.SearchIcon,{})}),(0,t.jsx)(O.$,{addRefTag:l.Gn.SearchSuggestion,children:n&&i?(0,t.jsx)(X,{query:n,results:g,selection:u,setSelection:w}):(0,t.jsx)(t.Fragment,{})})]})]})};var ee=r(7350),en=r.n(ee);let er=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,[,r]=(0,a.useState)(0),t=0,i=en()(function(){let{scrollTop:n}=document.documentElement||document.body;r(e=>(t=e,n)),e({previousScrollTop:t,currentScrollTop:n})},n);(0,a.useEffect)(()=>(window.addEventListener("scroll",i),()=>window.removeEventListener("scroll",i)),[])};var et=r(78326);let ea=e=>{let{clickthroughUrl:n,altText:r,siteStripColor:a,desktop1xPhoto:i,desktop2xPhoto:o,mobile1xPhoto:l,mobile2xPhoto:d}=e,c="SiteHeaderBanner",u=(0,s.useFor)({lessThan:s.Breakpoints.Medium});return(0,t.jsx)("div",{className:c,children:null!=n?(0,t.jsx)("div",{className:(0,et.A)(c,"topFullImageContainer"),"data-testid":(0,et.A)(c,"topFullImageContainer"),style:{backgroundColor:a},children:(0,t.jsx)("a",{"data-testid":(0,et.A)(c,"topFullImageLink"),href:n,children:(0,t.jsx)("img",{alt:r||"Site Header Banner Image","data-testid":(0,et.A)(c,"topFullImage"),src:u?l:i,srcSet:u?"".concat(d," 2x"):"".concat(o," 2x")})})}):null})},ei=72,es=120,eo=40,el=()=>{var e;return null===(e=document.querySelector(".HeaderPrimaryNav__list"))||void 0===e?void 0:e.contains(document.activeElement)},ed=()=>{var e;let n="Header",[r,h]=(0,a.useState)(!1),[g,m]=(0,a.useState)(!1);er(e=>{let{previousScrollTop:n,currentScrollTop:r}=e;if(el())return;let t=n<r,a=r>80;setTimeout(()=>{m(t&&a)},200)});let v=(0,a.useContext)(c.Q),x=null==v?void 0:v.hasSiteHeaderBanner,p=[(0,o.o4)(n,"searchContainer"),{[(0,o.o4)(n,"searchContainer","open")]:r,[(0,o.o4)(n,"searchContainer","siteHeaderBanner")]:x}];return(0,t.jsx)(d.$D,{addRefTag:l.Gn.Header,children:(0,t.jsxs)("header",{id:n,className:(0,i.A)([(0,o.o4)(n),{[(0,o.o4)(n,"siteHeaderBanner")]:x}]),"data-auth":(null===(e=(0,a.useContext)(u.cy))||void 0===e?void 0:e.signedIn)?1:0,children:[(0,t.jsx)(ea,{...v.siteHeaderBanner}),(0,t.jsxs)("div",{className:(0,o.o4)(n,"contents"),children:[(0,t.jsx)("button",{type:"button",className:(0,o.o4)(n,"toggleSearchContainer"),"aria-label":"Start Search",onClick:()=>h(!r),children:(0,t.jsx)(s.SearchIcon,{})}),(0,t.jsx)(d.ZG,{href:"/",className:(0,o.o4)(n,"logo"),"aria-label":"Home",refTag:l.Gn.Home,children:(0,t.jsx)(s.GoodreadsWordmark,{})}),(0,t.jsx)("div",{"data-testid":"primaryNavContainer",className:(0,i.A)([(0,o.o4)(n,"primaryNavContainer"),{[(0,o.o4)(n,"primaryNavContainer","hide")]:g}]),children:(0,t.jsx)(k,{})}),(0,t.jsx)("div",{className:(0,i.A)(p),children:(0,t.jsx)(d.$D,{addRefTag:l.Gn.SearchBar,children:(0,t.jsx)(Y,{})})}),(0,t.jsx)(F,{})]})]})})}},70090:(e,n,r)=>{r.d(n,{q5:()=>a,HI:()=>i,wU:()=>u,yK:()=>m});var t=r(96540);let a="edit_view",i=t.createContext({editView:!0,setEditView:()=>{}});var s=r(74848),o=r(92071),l=r(68431),d=r(30559),c=r(73621);let u=e=>{var n;let{children:r}=e,[u,h]=(0,t.useState)(!0),g=null===(n=(0,t.useContext)(l.cy))||void 0===n?void 0:n.role,{data:m}=(0,c.A)(),v=o.A.get(a);return(0,t.useEffect)(()=>{let e=m&&m.getUser,n=(null==e?void 0:e.isAuthor)||(0,d.fP)(g);"false"!==v&&n?h(!0):h(!1)},[m,g]),(0,s.jsx)(i.Provider,{value:{editView:u,setEditView:h},children:r})};var h=r(81163);let g="ToggleEditViewInput",m=()=>{var e;let n=null===(e=(0,t.useContext)(l.cy))||void 0===e?void 0:e.role,{editView:r,setEditView:u}=(0,t.useContext)(i),{data:m}=(0,c.A)(),v=m&&m.getUser;if(!(null==v?void 0:v.isAuthor)&&!(0,d.fP)(n))return null;let x=()=>{let e=!r;u(e);let n=new Date;n.setFullYear(n.getFullYear()+1),o.A.set(a,e,{expires:n,path:"/"})};return(0,s.jsxs)("label",{className:g,children:[(0,s.jsx)("input",{"data-testid":"input",className:(0,h._bem)(g,"input"),name:"Edit mode",type:"checkbox",checked:r,onChange:x,onKeyDown:e=>{"Enter"===e.key&&x()}}),(0,s.jsx)("span",{className:(0,h._bem)(g,"checkmark")}),"Edit mode"]})}},50720:(e,n,r)=>{r.d(n,{$D:()=>l,B0:()=>c,H7:()=>d,OM:()=>s,_1:()=>o});var t=r(74848);r(96540);var a=r(81163);let i={gray_100:"#EBEBEB",gray_200:"#F2F2F2",gray_600:"#707070",gray_700:"#4F4F4D"},s={primaryColor:i.gray_100,secondaryColor:i.gray_200},o={primaryColor:i.gray_700,secondaryColor:i.gray_600},l=2;var d=function(e){return e[e.SMALL=0]="SMALL",e[e.REGULAR=1]="REGULAR",e}({});let c=e=>{let{loadingTextSize:n=1,withDivider:r=!1}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"LoadingCard",children:[0===n&&(0,t.jsx)(a.H3,{children:"Loading..."}),1===n&&(0,t.jsx)(a.H1,{children:"Loading..."}),(0,t.jsx)(a.Button,{disabled:!0,children:(0,t.jsx)(a.LoadingIcon,{})})]}),r&&(0,t.jsx)(a.Divider,{})]})}},19254:(e,n,r)=>{r.d(n,{d:()=>g,e:()=>m});var t=r(74848);r(96540);var a=r(13368),i=r.n(a),s=r(20024);let o=e=>void 0===e?null:e.length>55?"".concat(e.substring(0,55),"…"):e,l=e=>{let{title:n="Goodreads",type:r="website",image:a,url:i,description:s}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("meta",{property:"og:title",content:o(n)}),(0,t.jsx)("meta",{name:"twitter:title",content:o(n)}),(0,t.jsx)("meta",{property:"og:type",content:r}),(0,t.jsx)("meta",{name:"twitter:card",content:"summary"}),(0,t.jsx)("meta",{property:"og:image",content:a||"https://s.gr-assets.com/assets/facebook/goodreads_wide-e23f6858b6bf20dcaf8493237a214a0e.png"}),(0,t.jsx)("meta",{name:"twitter:image",content:a||"https://s.gr-assets.com/assets/facebook/goodreads_wide-e23f6858b6bf20dcaf8493237a214a0e.png"}),i&&(0,t.jsx)("meta",{property:"og:url",content:i}),(0,t.jsx)("meta",{property:"og:site_name",content:"Goodreads"}),(0,t.jsx)("meta",{property:"og:description",content:o(s)||"Discover and share books you love on Goodreads."}),(0,t.jsx)("meta",{name:"twitter:description",content:o(s)||"Discover and share books you love on Goodreads."})]})};var d=r(84934),c=r(90026);let u=e=>{let{metaTags:n={},schemaOrgData:r}=e;return(0,t.jsxs)(t.Fragment,{children:[n.description&&(0,t.jsx)("meta",{name:"description",content:n.description}),n.noIndex&&(0,t.jsx)("meta",{name:"robots",content:"noindex"}),(0,t.jsx)("meta",{name:"viewport",content:n.viewportContent||"initial-scale=1.0, width=device-width"}),r&&(0,t.jsx)(c.Zn,{item:r})]})},h=e=>{let{languageLinks:n,bestBook:r,canonicalUrl:a}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("link",{rel:"icon",href:"/favicon.ico"}),a&&(0,t.jsx)("link",{href:a,rel:"canonical"}),n&&r&&n.map(e=>(0,t.jsx)("link",{rel:"alternate",href:r.webUrl.replace(/book\/show/,e.isoLanguageCode.concat("/book/show")),hrefLang:e.isoLanguageCode},e.isoLanguageCode))]})},g=160,m=e=>{let{linkTags:n,logPageHit:r=!0,seoTags:a={},openGraphTags:o={},title:c,children:g}=e,m=(0,d.useRouter)();return(0,t.jsxs)(s.Li,{logPageHit:r,children:[(0,t.jsxs)(i(),{children:[(0,t.jsx)(h,{...n}),(0,t.jsx)(u,{...a}),(0,t.jsx)(l,{...o,url:o.url||"https://www.goodreads.com".concat(null==m?void 0:m.asPath)}),c&&(0,t.jsx)("title",{children:c})]}),g]})}},82815:(e,n,r)=>{r.d(n,{M:()=>Y,eO:()=>H,bU:()=>E,ec:()=>R.e});var t=r(74848),a=r(96540),i=r(86100),s=r(81163),o=r(98669),l=r(73699),d=r(91106),c=r.n(d),u=r(29965),h=r.n(u),g=r(66909),m=r(83998),v=r(13775);let x=()=>{let e="Footer";return(0,t.jsx)(v.s,{as:"footer",className:e,contentType:m.ContentType.Element,contentId:"footer",children:(0,t.jsxs)("div",{className:(0,g.o4)(e,"contents"),children:[(0,t.jsxs)("div",{className:(0,g.o4)(e,"column"),children:[(0,t.jsx)("h3",{className:(0,g.o4)(e,"heading"),children:"Company"}),(0,t.jsxs)("ul",{className:(0,g.o4)(e,"list"),children:[(0,t.jsx)("li",{children:(0,t.jsx)(c(),{href:"/about/us",children:"About us"})}),(0,t.jsx)("li",{children:(0,t.jsx)(c(),{href:"/jobs",children:"Careers"})}),(0,t.jsx)("li",{children:(0,t.jsx)(c(),{href:"/about/terms",children:"Terms"})}),(0,t.jsx)("li",{children:(0,t.jsx)(c(),{href:"/about/privacy",children:"Privacy"})}),(0,t.jsx)("li",{children:(0,t.jsx)(c(),{href:"https://help.goodreads.com/s/article/Goodreads-Interest-Based-Ads-Notice",children:"Interest Based Ads"})}),(0,t.jsx)("li",{children:(0,t.jsx)(c(),{href:"/adprefs",children:"Ad Preferences"})}),(0,t.jsx)("li",{children:(0,t.jsx)(c(),{href:"/help?action_type=help_web_footer",children:"Help"})})]})]}),(0,t.jsxs)("div",{className:(0,g.o4)(e,"column"),children:[(0,t.jsx)("h3",{className:(0,g.o4)(e,"heading"),children:"Work With Us"}),(0,t.jsxs)("ul",{className:(0,g.o4)(e,"list"),children:[(0,t.jsx)("li",{children:(0,t.jsx)(c(),{href:"/author/program",children:"Authors"})}),(0,t.jsx)("li",{children:(0,t.jsx)(c(),{href:"/advertisers",children:"Advertise"})}),(0,t.jsx)("li",{children:(0,t.jsx)(c(),{href:"/news?content_type=author_blogs",children:"Authors & ads blog"})})]})]}),(0,t.jsxs)("div",{className:(0,g.o4)(e,"column"),children:[(0,t.jsx)("h3",{className:(0,g.o4)(e,"heading"),children:"Connect"}),(0,t.jsxs)("ul",{className:(0,g.o4)(e,"list","inline"),children:[(0,t.jsx)("li",{children:(0,t.jsx)(c(),{"aria-label":"Facebook",href:"https://www.facebook.com/Goodreads/",children:(0,t.jsx)(s.FacebookIcon,{})})}),(0,t.jsx)("li",{children:(0,t.jsx)(c(),{"aria-label":"Twitter",href:"https://twitter.com/goodreads",children:(0,t.jsx)(s.TwitterIcon,{})})}),(0,t.jsx)("li",{children:(0,t.jsx)(c(),{"aria-label":"Instagram",href:"https://www.instagram.com/goodreads/",children:(0,t.jsx)(s.InstagramIcon,{})})}),(0,t.jsx)("li",{children:(0,t.jsx)(c(),{"aria-label":"LinkedIn",href:"https://www.linkedin.com/company/goodreads-com/",children:(0,t.jsx)(s.LinkedinIcon,{})})})]})]}),(0,t.jsxs)("div",{className:(0,g.o4)(e,"right"),children:[(0,t.jsx)(c(),{className:(0,g.o4)(e,"badge"),href:"https://itunes.apple.com/app/apple-store/id355833469?pt=325668&ct=mw_footer&mt=8",children:(0,t.jsx)(h(),{src:"https://dryofg8nmyqjw.cloudfront.net/images/badge-apple_app_store@2x.png",width:"135",height:"40",alt:"Download app for iOS"})}),(0,t.jsx)(c(),{className:(0,g.o4)(e,"badge"),href:"https://play.google.com/store/apps/details?id=com.goodreads&utm_source=mw_footer&pcampaignid=MKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1",children:(0,t.jsx)(h(),{src:"https://dryofg8nmyqjw.cloudfront.net/images/badge-google_play_store@2x.png",width:"135",height:"40",alt:"Download app for Android"})}),(0,t.jsxs)("p",{className:(0,g.o4)(e,"copy"),children:["\xa9 ",new Date().getFullYear()," Goodreads, Inc."]})]})]})})};var p=r(84934),f=r(39421),j=r(92071),b=r(20024),y=r(15784),w=r(42189);let k="LoginInterstitial",S="blocking_sign_in_interstitial",N=()=>{let e=new Date;return e.setTime(e.getTime()+864e5),e},T=(e,n)=>{if(!window.URLSearchParams||!window.URL)return e;let r=new URLSearchParams({returnurl:n}).toString();return"".concat(e,"?").concat(r)},A=()=>{let e=(0,b.Cu)("/amazon/login/redirect_to_amazon_login_url",w.Gn.ContinueWithAmazon);return(0,t.jsx)("div",{className:(0,g.o4)(k,"buttonWrap"),children:(0,t.jsxs)(s.Button,{onClick:()=>window.open(e,"","width=900,height=540"),block:!0,size:s.ButtonSize.Large,variant:s.ButtonVariant.SignInWithAmazon,children:[(0,t.jsx)(s.AmazonIcon,{}),"Continue with Amazon"]})})},C=e=>{let{pathname:n}=e,r=T("/user/sign_up",n);return(0,t.jsx)("div",{className:(0,g.o4)(k,"buttonWrap"),children:(0,t.jsx)(b.Ov,{href:r,refTag:w.Gn.SignUpWithEmail,block:!0,size:s.ButtonSize.Large,variant:s.ButtonVariant.Primary,children:"Sign up with email"})})},G=()=>{var e,n;let r=(0,p.useRouter)(),i=r.pathname;r.query&&Object.entries(r.query).forEach(e=>{let[n,r]=e;i.includes("[".concat(n,"]"))&&"string"==typeof r&&(i=i.replace("[".concat(n,"]"),r))});let[o,l]=(0,a.useState)("true"===j.A.get(S)),{logAction:d}=(0,y.I)(),c=null!==(n=null===(e=(0,a.useContext)(f.c))||void 0===e?void 0:e.signedIn)&&void 0!==n&&n,[u,h]=(0,a.useState)(!0);if(c||o)return null;let m=j.A.get("logged_out_browsing_page_count");return!m||m<2?null:(d(w.X2.SignInPromptGet),(0,t.jsx)(s.Modal,{mode:s.ModalModes.Info,styling:s.ModalStylings.Plain,onClose:()=>{j.A.set(S,!0,{path:"/",expires:N()}),l(!0),d(w.X2.SignInPromptDismiss)},setOpen:h,open:u,header:" ",children:(0,t.jsx)(b.$D,{addRefTag:w.Gn.Signup,children:(0,t.jsx)(b.$D,{addRefTag:w.Gn.AuthInterstitial,children:(0,t.jsxs)("div",{className:(0,g.o4)(k),children:[(0,t.jsx)(s.H1,{seoTag:"h2",children:"Discover & Read More"}),(0,t.jsx)("img",{className:(0,g.o4)(k,"img"),src:"https://www.goodreads.com/assets/layout/gr_interstitial_popup.png",alt:"People sitting and reading on a hill by the sea"}),(0,t.jsx)("p",{className:(0,g.o4)(k,"text"),children:(0,t.jsx)(s.Text,{preset:s.Text.Preset.Body1,children:"Sign up to get better recommendations with a free account"})}),(0,t.jsxs)("div",{className:(0,g.o4)(k,"buttonArea"),children:[(0,t.jsx)(A,{}),(0,t.jsx)(C,{pathname:i})]}),(0,t.jsxs)("p",{className:(0,g.o4)(k,"text"),children:["Already a member?"," ",(0,t.jsx)(b.ZG,{href:"https://www.goodreads.com/user/sign_in",refTag:w.Gn.SignIn,children:"Sign in"})]}),(0,t.jsx)("p",{className:(0,g.o4)(k,"finePrint"),children:(0,t.jsx)(s.Text,{preset:s.Text.Preset.Body3,children:(0,t.jsxs)(s.Formatted,{children:['By clicking "Sign up" I agree to the Goodreads'," ",(0,t.jsx)("a",{href:"https://www.goodreads.com/about/terms",children:"Terms of Service"})," ","and confirm that I am at least 13 years old. Read our"," ",(0,t.jsx)("a",{href:"https://www.goodreads.com/about/privacy",children:"Privacy Policy"})]})})})]})})})}))};var _=r(60350);function L(){let{theme:e,toggleTheme:n}=(0,a.useContext)(s.ThemeContext);return(0,t.jsx)("div",{className:"ThemeToggleButton",children:(0,t.jsx)(s.Button,{onClick:()=>{n(e===s.Theme.Light?s.Theme.Dark:s.Theme.Light)},variant:s.ButtonVariant.Primary,children:e===s.Theme.Light?"Switch to Dark Theme (dev only)":"Switch to Light Theme"})})}var I=r(68431),B=r(2420),U=r(1694),M=r(11533),P=r(54279);let E=e=>{var n,r;let{className:d,topBannerAd:c,showLoginPrompt:u=!0,children:h}=e,g="PageFrame",m=null===(n=(0,a.useContext)(I.uz))||void 0===n?void 0:n.isWebView,v=null===(r=(0,a.useContext)(B.Q))||void 0===r?void 0:r.hasSiteHeaderBanner;return(0,a.useEffect)(()=>{try{{let e=document.cookie;e.split("ccsid").length-1>1&&(U.A.reportCount(M.A.DuplicateCCSID,[],1),P.A.info("Duplicate cookie found: ".concat(e)))}}catch(e){P.A.error("PageFrame.tsx: Failed to check ccsid cookie. Error: ".concat(e))}finally{j.A.removeAllDuplicateCookies()}m&&document.documentElement.setAttribute("class","webView")},[]),(0,t.jsxs)(t.Fragment,{children:[!m&&u&&(0,t.jsx)(o.Ay,{debounce:1e3,children:(0,t.jsx)(G,{})}),!m&&(0,t.jsx)(l.Y9,{}),(0,_.yz)()&&(0,t.jsx)(L,{}),(0,t.jsxs)("div",{className:(0,i.A)([(0,s._bem)(g),{[(0,s._bem)(g,null,"webView")]:m,[(0,s._bem)(g,null,"siteHeaderBanner")]:v}]),"data-testid":"pageFrame",children:[c,(0,t.jsx)("main",{className:(0,i.A)([(0,s._bem)(g,"main"),d]),children:h})]}),!m&&(0,t.jsx)(x,{})]})};var R=r(19254),F=r(98159);let D=(0,F.fl)(j.A.get(F.wB)).oidcIssuer,H=e=>{let{error:n}=e;return(0,_.yz)()?(null==n?void 0:n.message.search("401"))!==-1||(null==n?void 0:n.message.search("Not Authorized"))!==-1?(0,t.jsxs)("pre",{children:["Error: ",n.message,(0,t.jsxs)("ol",{children:[(0,t.jsxs)("li",{children:["1. Please click -"," ",(0,t.jsx)("a",{href:D,target:"_blank",rel:"noopener noreferrer",children:D})]}),(0,t.jsx)("li",{children:"2. Sign in"}),(0,t.jsx)("li",{children:"3. Copy-paste the _session_id2 cookie"}),(0,t.jsx)("li",{children:"4. Refresh the page"})]})]}):(0,t.jsxs)("pre",{children:["Error: ",n.message]}):null};var q=r(13368),Z=r.n(q);let z="SupportedErrorCodes",O=[404,500],$=e=>{switch(e){case 404:return(0,t.jsx)("title",{children:"Page not found"});case 500:return(0,t.jsx)("title",{children:"Unexpected error"});default:return null}},W=e=>{switch(e){case 404:return(0,t.jsx)("span",{children:"Sorry, we couldn’t find the page you were looking for."});case 500:return(0,t.jsx)("span",{children:"Sorry, an unexpected error occurred."});default:return null}},J=e=>{switch(e){case 404:return(0,t.jsxs)("span",{children:["It may have moved or the web address you entered was incorrect. Visit our"," ",(0,t.jsxs)("a",{className:(0,s._bem)(z,"link"),href:"https://help.goodreads.com/s/",children:[" ","Help Section"," "]})," ","or"," ",(0,t.jsxs)(c(),{className:(0,s._bem)(z,"link"),href:"/",children:[" ","Home Page"," "]})," ","for a fresh start."]});case 500:return(0,t.jsx)("span",{children:"We’re currently experiencing an unknown problem and are working to fix it as quickly as possible. Please try again soon."});default:return null}};var V=r(55218),K=r.n(V),Q=r(83413);let X="ErrorPage",Y=e=>{let{statusCode:n,message:r,from:i}=e,o=(0,p.useRouter)(),l=O.includes(n);if(r){var d;P.A.error("ErrorPage shown at ".concat(null!==(d=null==o?void 0:o.asPath)&&void 0!==d?d:i," with status code ").concat(n,' and message "').concat(r,'"'))}return(0,a.useEffect)(()=>{(null==o?void 0:o.pathname)&&U.A.reportCount("ErrorPageShown",[(0,Q.N6)(o.pathname)])},[]),(0,t.jsxs)(R.e,{seoTags:{metaTags:{noIndex:!0}},logPageHit:!1,children:[(0,t.jsx)(Z(),{children:l&&$(n)}),(0,t.jsx)(E,{children:l?(0,t.jsxs)("div",{className:(0,s._bem)(X,"top"),children:[(0,t.jsx)("div",{className:(0,s._bem)(X,"leftColumn"),children:(0,t.jsx)("img",{src:"https://dryofg8nmyqjw.cloudfront.net/images/".concat(n,".png"),alt:""})}),(0,t.jsxs)("div",{className:(0,s._bem)(X,"rightColumn"),"data-testid":"errorText",children:[(0,t.jsx)("div",{className:(0,s._bem)(X,"title"),children:(0,t.jsx)(s.Text,{preset:s.Text.Preset.H1,fontOptions:{weight:s.FontWeight.Semibold},children:W(n)})}),(0,t.jsx)(s.Text,{fontOptions:{size:s.BodyTextSizes.Large},children:J(n)}),(0,t.jsx)("div",{className:(0,s._bem)(X,"goBackButton"),children:(0,t.jsxs)(s.Button,{onClick:()=>o.back(),size:s.ButtonSize.Large,variant:s.ButtonVariant.Inline,children:["Go back",(0,t.jsx)(s.ChevronIcon,{direction:s.Direction.Right})]})})]})]}):(0,t.jsx)(K(),{statusCode:n})})]})}},2420:(e,n,r)=>{r.d(n,{Q:()=>t});let t=r(96540).createContext({siteHeaderBanner:{},hasSiteHeaderBanner:!1})},82862:(e,n,r)=>{r.d(n,{Yo:()=>g,dr:()=>x,Sc:()=>w,d7:()=>S,Zx:()=>k,Me:()=>p,vw:()=>f,ws:()=>b});var t=r(81163),a=r(95420),i=r(10877),s=r(39191),o=r(84577),l=r(95633);function d(){let e=(0,o._)(["\n  mutation ShelveBook($input: ShelveBookInput!) {\n    shelveBook(input: $input) {\n      shelving {\n        legacyId\n        id\n        shelf {\n          name\n          displayName\n          editable\n          default\n          webUrl\n        }\n        webUrl\n      }\n    }\n  }\n"]);return d=function(){return e},e}let c=(0,l.J1)(d());function u(){let e=(0,o._)(["\n  mutation UnshelveBook($input: UnshelveBookInput!) {\n    unshelveBook(input: $input) {\n      isSuccessful\n    }\n  }\n"]);return u=function(){return e},e}let h=(0,l.J1)(u());var g=function(e){return e[e.ShelveBook=0]="ShelveBook",e[e.TagBook=1]="TagBook",e[e.UnshelveBook=2]="UnshelveBook",e[e.Rating=3]="Rating",e}({});let m=e=>{let n;return(null==e?void 0:e.tagBook)?n=1:(null==e?void 0:e.shelveBook)?n=0:(null==e?void 0:e.unshelveBook)?n=2:(null==e?void 0:e.__typename)==="Shelving"&&(n=3),n},v=e=>{let n,r;switch(e){case 1:n=s.A,r=i.hK;break;case 0:n=c,r=i.jf;break;case 2:n=h,r=i.MW}return{mutation:n,fragment:r}},x=(e,n,r)=>{let t={id:e};switch(t.__typename="Shelving",null!=r?r:m(n)){case 1:t.taggings=n.tagBook.taggings;break;case 0:t=n.shelveBook.shelving;break;case 2:n.unshelveBook.isSuccessful&&(t.taggings=[],t.shelf={__typename:"Shelf",name:null,webUrl:null},t.review=null,t.book=null)}return t},p=function(e,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return"".concat(r?"":"Shelving:","kca://profile:goodreads/").concat(e,"|").concat(n)},f=(e,n,r,t,a)=>{let s="Work:".concat(n),o=i.rI,l=r.readFragment({id:s,fragment:o});if(!l)return;let d=p(t,e,!0),c=(l.viewerShelvings||[]).filter(e=>e.id!==d),u=m(a.data||a),h=3!==u?x(d,a):a;if(0===u||3===u){var g;h={...h,book:{__typename:"Book",id:e,legacyId:null==h?void 0:null===(g=h.book)||void 0===g?void 0:g.legacyId}}}2!==u&&c.push(h);let v={...l,viewerShelvings:c};r.writeFragment({id:s,fragment:o,data:v})},j=(e,n,r,t,a)=>{n.writeFragment({id:p(r,e),fragment:a,data:x(p(r,e,!0),t.data,m(t))})},b=e=>{let{bookId:n,workId:r,customerId:i,mutationType:s,variables:o,enableOnCompletedAction:l=!1,useMutationOptions:d={}}=e,{mutation:c,fragment:u}=v(s);return(0,a.n)(c,{variables:o,onCompleted:e=>{if(l)switch(s){case 0:var n,r,a;(null==e?void 0:null===(a=e.shelveBook)||void 0===a?void 0:null===(r=a.shelving)||void 0===r?void 0:null===(n=r.shelf)||void 0===n?void 0:n.name)==="to-read"&&t.Toast.success("Shelved as want to read");break;case 2:t.Toast.success("Removed book from shelves")}},onError:()=>{},update:(e,t)=>{j(n,e,i,t,u),r&&f(n,r,e,i,t)},...d})},y="placeholder_web_url",w=(e,n)=>{let r={__typename:"Mutation"},t={...e};t.webUrl||(t.webUrl=y),t.displayName||(t.displayName=e.name);let a={...n};return a.shelf=t,r.shelveBook={__typename:"ShelveBookPayload",shelving:a},r},k=()=>{let e={__typename:"Mutation"};return e.unshelveBook={__typename:"UnshelveBookPayload",isSuccessful:!0},e},S=(e,n,r)=>{let t=e.filter(e=>!r.includes(e.tag.name));n.forEach(e=>{t.push({__typename:"Tagging",tag:{__typename:"Tag",name:e,webUrl:y}})});let a={__typename:"Mutation"};return a.tagBook={__typename:"TagBookPayload",taggings:t},a}},73621:(e,n,r)=>{r.d(n,{A:()=>d});var t=r(96540),a=r(46537),i=r(39421),s=r(84577);function o(){let e=(0,s._)(["\n  query getUser($userUri: ID) {\n    getUser(userUri: $userUri) {\n      id: legacyId\n      name\n      imageUrl\n      imageUrlSquare\n      readingChallengeUrl\n      navigationQuickLinks {\n        webUrl\n        pageType\n      }\n      isAuthor\n      contributor {\n        id\n        webUrl\n        works {\n          totalCount\n        }\n      }\n      textReviewsCount\n      followersCount\n      favoriteGenres {\n        totalCount\n        edges {\n          node {\n            id\n            webUrl\n            name\n          }\n        }\n      }\n      webUrl\n      viewerNotificationsUnreadCount\n      viewerMessagesUnreadCount\n      viewerFriendRequestsUnreadCount\n    }\n  }\n"]);return o=function(){return e},e}let l=(0,r(95633).J1)(o()),d=()=>{var e;let n=null===(e=(0,t.useContext)(i.c))||void 0===e?void 0:e.signedIn;return(0,a.IT)(l,{skip:!n})}},39191:(e,n,r)=>{r.d(n,{A:()=>i});var t=r(84577);function a(){let e=(0,t._)(["\n  mutation TagBook($input: TagBookInput!) {\n    tagBook(input: $input) {\n      taggings {\n        tag {\n          name\n          webUrl\n        }\n      }\n    }\n  }\n"]);return a=function(){return e},e}let i=(0,r(95633).J1)(a())},10877:(e,n,r)=>{r.d(n,{Gq:()=>v,MW:()=>h,W$:()=>p,hK:()=>g,jf:()=>m,rI:()=>x});var t=r(84577),a=r(95633),i=r(10979);function s(){let e=(0,t._)(["\n  fragment ShelvingAndTaggingsFragment on Shelving {\n    __typename\n    shelf {\n      name\n      displayName\n      editable\n      default\n      webUrl\n    }\n    taggings {\n      tag {\n        webUrl\n        name\n      }\n    }\n    review\n  }\n"]);return s=function(){return e},e}function o(){let e=(0,t._)(["\n  fragment TaggingsFragment on Shelving {\n    __typename\n    taggings {\n      tag {\n        webUrl\n        name\n      }\n    }\n  }\n"]);return o=function(){return e},e}function l(){let e=(0,t._)(["\n  fragment ShelvingFragment on Shelving {\n    __typename\n    shelf {\n      name\n      displayName\n      editable\n      default\n      webUrl\n    }\n  }\n"]);return l=function(){return e},e}function d(){let e=(0,t._)(["\n  fragment RatingFragment on Shelving {\n    __typename\n    id\n    shelf {\n      name\n      displayName\n      editable\n      default\n      webUrl\n    }\n    taggings {\n      tag {\n        name\n        webUrl\n      }\n    }\n    review {\n      ...ViewerReviewFragment\n    }\n    webUrl\n  }\n  ","\n"]);return d=function(){return e},e}function c(){let e=(0,t._)(["\n  fragment WorkViewerShelvingsFragment on Work {\n    id\n    viewerShelvings {\n      id\n      book {\n        id\n      }\n    }\n  }\n"]);return c=function(){return e},e}function u(){let e=(0,t._)(["\n  fragment ShelvedMultipleExclusiveFragment on Book {\n    reviewEditUrl\n    work {\n      id\n      editions {\n        webUrl\n      }\n      viewerShelvingsUrl\n    }\n  }\n"]);return u=function(){return e},e}let h=(0,a.J1)(s()),g=(0,a.J1)(o()),m=(0,a.J1)(l()),v=(0,a.J1)(d(),i.A),x=(0,a.J1)(c()),p=(0,a.J1)(u())},10979:(e,n,r)=>{r.d(n,{A:()=>i});var t=r(84577);function a(){let e=(0,t._)(["\n  fragment ViewerReviewFragment on Review {\n    __typename\n    id\n    creator {\n      id: legacyId\n      followersCount\n      imageUrlSquare\n      isAuthor\n      textReviewsCount\n      name\n      webUrl\n    }\n    viewerHasLiked\n    likeCount\n    comments {\n      totalCount\n    }\n    updatedAt\n    text\n    rating\n  }\n"]);return a=function(){return e},e}let i=(0,r(95633).J1)(a())},49793:(e,n,r)=>{r.d(n,{_v:()=>V});var t=r(74848);r(96540);var a=r(28797),i=r(98159);let s=(e,n)=>{let r;return r=null!=e?{type:i.vq,jwtToken:e}:{type:i.c4,apiKey:(0,i.fl)(n).apiKey},{url:(0,i.fl)(n).graphqlEndpoint,region:(0,i.fl)(n).region,auth:r}};var o=r(68431),l=r(43665),d=r(41174),c=r(91977),u=r(63472),h=r(81193),g=r(31673),m=r(49874),v=r.n(m);let x=(e,n,r)=>{let t=A(),a=T(e),i=N(e,n),s=G(r),{url:o}=e,l=(0,h.$)({uri:o,fetch:v()});return g.C.from([t,a,i,C,s,l])};var p=r(73401),f=r(82460),j=r(82081),b=r(94335),y=r(29638),w=r(54279),k=r(60350),S=r(66909);let N=(e,n)=>{let r;let t=(e,n)=>new p.c(t=>{b.A.get("/authenticate").then(e=>{r=e.data}).catch(n=>{var r,t;(null===(r=n.response)||void 0===r?void 0:r.status)!==401&&w.A.error("Authenticate endpoint failed with ".concat(null===(t=n.response)||void 0===t?void 0:t.status)),(0,k.KV)()&&((0,y.dR)(e),(0,S.bL)())}).then(()=>{let r={next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)};n(e).subscribe(r)}).catch(e=>{var n;w.A.error("Retry query failed with ".concat(null==e?void 0:null===(n=e.response)||void 0===n?void 0:n.status))})}),a=(0,j.S)(e=>{let{graphQLErrors:n,networkError:r,operation:a,forward:i}=e,s=!1;return n&&(n.forEach(e=>{let{message:n}=e;/(Not Authorized)*(type Mutation)$/.test(n)&&(s=!0)}),s)||r&&401===r.statusCode?t(a,i):null}),s=(0,f.o)(async(n,t)=>{let a;return a=r?{authorization:r}:e.auth.type===i.c4?{"X-Api-Key":e.auth.apiKey}:{authorization:e.auth.jwtToken},{...t,headers:a}});return a.concat(s)},T=e=>(0,j.S)(n=>{var r;let{response:t}=n;e.auth.type!==i.vq&&t&&(t.errors=null===(r=t.errors)||void 0===r?void 0:r.filter(e=>"Unauthorized"!==e.errorType))}),A=()=>(0,j.S)(e=>{let{graphQLErrors:n,networkError:r}=e;n&&n.forEach(e=>{let{message:n,errorType:r,path:t,locations:a}=e;w.A.error('[GraphQL error]: Message: "'.concat(n,'", ErrorType: ').concat(r,", Path: ").concat(t,", Location: ").concat(JSON.stringify(a)))}),r&&w.A.error("[Network error]: ".concat(JSON.stringify(r)))}),C=new g.C((e,n)=>((0,k.KV)(),n(e))),G=e=>new g.C((n,r)=>((0,k.hp)()&&e&&n.setContext(n=>{let{headers:r}=n;return{headers:{"X-Host-Override":e,...r}}}),r(n)));var _=r(92071),L=r(51002),I=r(30559),B=r(67773),U=r(46537),M=r(84577),P=r(95633);function E(){let e=(0,M._)(["\n  query getSiteHeaderBanner {\n    getSiteHeaderBanner {\n      altText\n      clickthroughUrl\n      desktop1xPhoto\n      desktop2xPhoto\n      mobile1xPhoto\n      mobile2xPhoto\n      siteStripColor\n    }\n  }\n"]);return E=function(){return e},e}let R=(0,P.J1)(E());var F=r(2420);let D=e=>{var n,r,t,a;let i=null==e?void 0:e.getSiteHeaderBanner;return!!i&&(null==i?void 0:null===(n=i.desktop1xPhoto)||void 0===n?void 0:n.length)>0&&(null==i?void 0:null===(r=i.mobile1xPhoto)||void 0===r?void 0:r.length)>0&&(null==i?void 0:null===(t=i.desktop2xPhoto)||void 0===t?void 0:t.length)>0&&(null==i?void 0:null===(a=i.mobile2xPhoto)||void 0===a?void 0:a.length)>0},H=e=>{let{children:n}=e,{data:r}=(0,U.IT)(R),a=D(r);return(0,t.jsx)(F.Q.Provider,{value:{siteHeaderBanner:a&&(null==r?void 0:r.getSiteHeaderBanner),hasSiteHeaderBanner:D(r)},children:n})};var q=r(70090),Z=r(20184);function z(){let e=(0,M._)(["\n  query getBookByLegacyId($legacyBookId: Int!) {\n    getBookByLegacyId(legacyId: $legacyBookId) {\n      title\n      id\n      work {\n        id\n      }\n    }\n  }\n"]);return z=function(){return e},e}r(71663),(0,P.J1)(z()),r(36758);let O=null,$=(e,n,r,t)=>{var a;if(O)return O;let i=(a=s(r,t),new c.R({defaultOptions:{query:{errorPolicy:"all"},watchQuery:{errorPolicy:"all"},mutate:{errorPolicy:"all"}},ssrMode:!1,link:x(a,t,n),cache:new u.D({typePolicies:{Book:{fields:{primaryContributorEdge:{merge:!0},details:{merge:!0},featureFlags:{merge:!0}}},Query:{fields:{getReviews:{keyArgs:!1,merge(){var e,n,r,t,a,i;let s,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=arguments.length>1?arguments[1]:void 0,d=arguments.length>2?arguments[2]:void 0,{pageInfo:c={},edges:u=[]}=o,h={...l.pageInfo,...c};if(null===(n=d.args)||void 0===n?void 0:null===(e=n.pagination)||void 0===e?void 0:e.after)s=[...u,...l.edges],h.nextPageToken=null===(a=l.pageInfo)||void 0===a?void 0:a.nextPageToken;else{if(null===(t=d.args)||void 0===t||null===(r=t.pagination)||void 0===r||!r.before)return l;s=[...l.edges,...u],h.prevPageToken=null===(i=l.pageInfo)||void 0===i?void 0:i.prevPageToken}return{...l,edges:s,pageInfo:h}}},getUser:{merge(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return{...e,...n}}}}},Shelving:{fields:{shelf:{merge:!0},review:{merge:!0}}},User:{fields:{viewerRelationshipStatus:{merge:!0}}},Work:{fields:{stats:{merge:!0},viewerShelvings:{merge:(e,n)=>n}}}}}).restore(e)}));return O||(O=i),i},W=async e=>{var n;let r="",t="";void 0!==e.req&&(r=e.req.headers.cookie,t=e.req.headers.host);let a=_.A.get(i.zO,r),s=_.A.get(i.iI,r),o=_.A.get(i.cV,r),l=(0,k._$)(),{customerId:d}=await B.A.parseJwt(a);(null===(n=e.req)||void 0===n?void 0:n.headers.unauthenticated)!==!0&&void 0===d&&(void 0!==s||void 0!==o)&&(a=await (0,L.Q)({context:e,dataSource:l,headers:Z.d_}));let c=e.apolloClient||$(e.apolloState||{},t,a,l);return c.toJSON=()=>null,e.apolloClient=c,{jwtToken:a,dataSource:l,apolloClient:c}},J=async e=>{let n={signedIn:!1,customerId:null,legacyCustomerId:null,role:I.Xh.User};return e?{signedIn:!0,...await B.A.parseJwt(e)}:n},V=function(){let{ssr:e=!1,usesServerSideProps:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r=>{let i=e=>{let{apolloClient:n,apolloState:i,gdft:s,jwtToken:l,dataSource:c,authContextParams:u,userAgentContextParams:h,userAgent:g,...m}=e,v=n||$(i,window.location.host,l,c);return(0,t.jsx)(a.X,{client:v,children:(0,t.jsx)(o.cy.Provider,{value:u,children:(0,t.jsx)(o.uz.Provider,{value:h,children:(0,t.jsx)(d.D,{children:(0,t.jsx)(q.wU,{children:(0,t.jsx)(o.ec,{userAgent:g,children:(0,t.jsx)(H,{children:(0,t.jsx)(r,{...m,gdft:null!=s&&s})})})})})})})})};return(e||r.getInitialProps)&&!n&&(i.getInitialProps=async e=>{var n,t;let{apolloClient:a,jwtToken:i,dataSource:s}=await W(e),o=await J(i),d=e.req?l.A.getWebView(e.req.headers["user-agent"]):null,c={};return r.getInitialProps&&(c=await r.getInitialProps(e)),{...{...c,query:null==e?void 0:e.query,jwtToken:i,dataSource:s,apolloClient:e.apolloClient,authContextParams:o,userAgentContextParams:d,userAgent:null===(t=e.req)||void 0===t?void 0:null===(n=t.headers)||void 0===n?void 0:n["user-agent"]},apolloState:a.cache.extract()}}),i}}},29638:(e,n,r)=>{r.d(n,{NI:()=>u,So:()=>d,dR:()=>c,qo:()=>h});var t=r(92071),a=r(82862);let i="pending-action";var s=function(e){return e.SHELVE_BOOK="ShelveBook",e}(s||{});let o=e=>null==e?void 0:e.startsWith("kca://"),l=()=>{let e={type:null,data:null};try{let n=t.A.get(i);e={type:n.split("|")[0],data:n.split("|")[1]}}catch(e){}return e},d=()=>{try{let{type:e,data:n}=l();return Object.values(s).some(n=>n===e)&&o(n)}catch(e){return!1}},c=e=>{if("ShelveBook"===e.operationName){let n=e.variables.input.id,r=new Date;r.setTime(r.getTime()+36e5),t.A.set(i,"ShelveBook|".concat(n),{expires:r})}},u=()=>{let e=new Date(0);t.A.set(i,"",{expires:e})},h=e=>{let{data:n}=l();return(0,a.ws)({customerId:e,bookId:n,mutationType:a.Yo.ShelveBook,variables:{input:{id:n,shelfName:"to-read"}}})}},13775:(e,n,r)=>{r.d(n,{r:()=>d,s:()=>l});var t=r(74848),a=r(96540),i=r(15784),s=r(47070),o=r(83998);let l=e=>{let{as:n="div",slotId:r,contentId:l,contentType:d=o.ContentType.Widget,children:c,...u}=e,{state:h}=(0,i.I)(),g=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let e=g.current,n={[s.On.CSAAttribute.Type]:d,[s.On.CSAAttribute.RequestId]:h.pageHitRequestId,[s.On.CSAAttribute.ContentId]:l,[s.On.CSAAttribute.SlotId]:r};s.On.registerCSAElement(e,n)},[]),(0,t.jsx)(n,{ref:g,...u,children:c})},d=e=>{let{slotId:n}=e,{logAction:r}=(0,i.I)();return(0,t.jsx)(l,{onClick:()=>r(n),...e})}}}]);